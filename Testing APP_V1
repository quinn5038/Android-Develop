//sendAppNameActivity.Java

package com.example.testingapp;

import android.content.Intent;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.os.Bundle;
import android.support.design.widget.FloatingActionButton;
import android.support.design.widget.Snackbar;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.Toolbar;
import android.view.View;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class sendAppnameActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_send_appname_activity);
        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);
        fab.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Snackbar.make(view, "Replace with your own action", Snackbar.LENGTH_LONG)
                        .setAction("Action", null).show();
            }
        });
    }

    public void displayMessage(View view){
        EditText editText = (EditText) findViewById(R.id.add_new);
        String package_name = editText.getText().toString();
//        TextView textView = new TextView(this);
//        textView.setText(package_name);
//        LinearLayout layout= (LinearLayout) findViewById(R.id.names_together);
//        layout.addView(textView);

        boolean ifRecorded = false;
        switch (package_name){
            case "com.xiaomi.vip":
                ifRecorded = true;
            case "com.miui.cleanmaster":
                ifRecorded = true;
            case "com.miui.cloudservice":
                ifRecorded = true;
        }
        String edition = "";
        String app_label = "";
        ImageView iconView=new ImageView(this);
        if(ifRecorded == true){
            try {
                PackageInfo info = this.getPackageManager().getPackageInfo(package_name, 0);
                edition = info.versionName;
                ApplicationInfo app_info= info.applicationInfo;
                app_label = this.getPackageManager().getApplicationLabel(app_info).toString();
                iconView.setImageDrawable(this.getPackageManager().getApplicationIcon(app_info));

            } catch (PackageManager.NameNotFoundException e) {
                e.printStackTrace();
            }
        }else{
            edition += "Not Found";
            app_label += "Not Found";
        }

        LinearLayout iconLayout= (LinearLayout) findViewById(R.id.images_together);
        iconLayout.addView(iconView);

        TextView labelView = new TextView(this);
        labelView.setText(app_label);
        LinearLayout labelLayout= (LinearLayout) findViewById(R.id.labels_together);
        labelLayout.addView(labelView);

        TextView editionView = new TextView(this);
        editionView.setText(edition);
        LinearLayout editionLayout= (LinearLayout) findViewById(R.id.edtions_together);
        editionLayout.addView(editionView);



    }
    
    
    //fragment_send_appname_activity.xml
    
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context="com.example.testingapp.send_appname_activityFragment"
    tools:showIn="@layout/activity_send_appname_activity">

    <LinearLayout
        android:id="@+id/three_piece"
        android:orientation="horizontal"
        android:layout_height="wrap_content"
        android:layout_width="match_parent">
        <EditText
            android:id="@+id/add_new"
            android:layout_weight="2"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:hint="@string/add_new"/>
        <Button
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/add"
            android:onClick="displayMessage"/>
    </LinearLayout>
    <LinearLayout
        android:orientation="vertical"
        android:id="@+id/images_together"
        android:layout_height="match_parent"
        android:layout_width="120dp"
        android:layout_below="@id/three_piece">
    </LinearLayout>
    <LinearLayout
        android:orientation="vertical"
        android:id="@+id/labels_together"
        android:layout_height="match_parent"
        android:layout_width="120dp"
        android:layout_toRightOf="@id/images_together"
        android:layout_below="@id/three_piece">
    </LinearLayout>
    <LinearLayout
        android:orientation="vertical"
        android:id="@+id/edtions_together"
        android:layout_height="match_parent"
        android:layout_width="120dp"
        android:layout_toRightOf="@id/labels_together"
        android:layout_below="@id/three_piece"
        />


    <!--
    <RelativeLayout
        android:id="@+id/r1"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:background="#F00"
        >
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/r2"
        android:layout_width="200dp"
        android:layout_height="50dp"
        android:background="#00E"
        android:layout_below="@+id/r1"
        >
    </RelativeLayout>
    -->
</RelativeLayout>


}
